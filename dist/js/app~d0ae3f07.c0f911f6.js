(function(t){function e(e){for(var r,o,i=e[0],c=e[1],u=e[2],l=0,d=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);m&&m(e);while(d.length)d.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,o=1;o<a.length;o++){var i=a[o];0!==s[i]&&(r=!1)}r&&(n.splice(e--,1),t=c(c.s=a[0]))}return t}var r={},o={"app~d0ae3f07":0},s={"app~d0ae3f07":0},n=[];function i(t){return c.p+"js/"+({"about~6a3582c1":"about~6a3582c1"}[t]||t)+"."+{"about~6a3582c1":"c92449ca","chunk-3a2f3c0e":"5ac4877f"}[t]+".js"}function c(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={"chunk-3a2f3c0e":1};o[t]?e.push(o[t]):0!==o[t]&&a[t]&&e.push(o[t]=new Promise((function(e,a){for(var r="css/"+({"about~6a3582c1":"about~6a3582c1"}[t]||t)+"."+{"about~6a3582c1":"31d6cfe0","chunk-3a2f3c0e":"8829fb60"}[t]+".css",s=c.p+r,n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var u=n[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===s))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===r||l===s)return e()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=e,m.onerror=function(e){var r=e&&e.target&&e.target.src||s,n=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=r,delete o[t],m.parentNode.removeChild(m),a(n)},m.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){o[t]=0})));var r=s[t];if(0!==r)if(r)e.push(r[2]);else{var n=new Promise((function(e,a){r=s[t]=[e,a]}));e.push(r[2]=n);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(m);var a=s[t];if(0!==a){if(a){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",d.name="ChunkLoadError",d.type=r,d.request=o,a[1](d)}s[t]=void 0}};var m=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=r,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(a,r,function(e){return t[e]}.bind(null,r));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var m=l;n.push([0,"chunk-vendors~2a42e354","chunk-vendors~00cb062a","chunk-vendors~adf5ac59","chunk-vendors~fdc6512a","chunk-vendors~6ff199a4","chunk-vendors~d2305125","chunk-vendors~4a7e9e0b","chunk-vendors~03631906","chunk-vendors~11c2601a","chunk-vendors~18f78390"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);var r=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"pink darken-2",dark:""}},[a("div",{staticClass:"d-flex align-center"},[a("h2",[t._v("SHOP STORE")])]),a("v-spacer"),t.isLogin?a("v-btn",{attrs:{text:""},on:{click:t.logout}},[t._v(" "+t._s(t.user.email)+" | Salir "),a("v-avatar",[a("img",{attrs:{src:"https://cdn.vuetifyjs.com/images/john.jpg",alt:"John"}})])],1):a("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!t.dialog}}},[a("span",{staticClass:"mr-2"},[t._v("Login")])])],1),a("v-main",{staticClass:"grey lighten-2"},[a("v-container",[a("router-view")],1)],1),a("v-dialog",{attrs:{"max-width":"500",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("login",{on:{salir:t.salir}})],1)],1)},s=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{outlined:""}},[a("v-form",{attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[a("v-card-title",[a("h3",[t._v("LogIn")]),a("v-spacer"),a("v-btn",{attrs:{outlined:"",text:""},on:{click:t.salir}},[t._v(" Salir ")])],1),a("v-divider"),a("v-card-text",[a("v-text-field",{attrs:{label:"Email *",required:"",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{label:"Password *",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"green",block:"",type:"submit"}},[t._v(" Aceptar ")])],1)],1)],1)},i=[],c=a("2f62"),u=a("bc3a"),l=a.n(u);r["a"].use(c["a"]);var d=new c["a"].Store({state:{url:"http://68.183.58.149:81/api/",token:localStorage.getItem("token")||null,user:{}},getters:{isLogin(t){return null!==t.token},getUser(t){return t.user}},mutations:{setToken(t,e){t.token=e},setUser(t,e){t.user=e}},actions:{getUser({commit:t,state:e}){const a=e.url+"user";l.a.get(a).then(e=>{t("setUser",e.data)}).catch(e=>{console.log(e.response.data.errors),t("setUser",{})})},getToken(t,e){return new Promise((a,r)=>{l()({method:"POST",url:t.state.url+"login",data:e}).then(e=>{!0===e.data.res&&(localStorage.setItem("token",e.data.token),l.a.defaults.headers.common.Authorization="Bearer "+e.data.token,t.commit("setToken",e.data.token),t.commit("setUser",e.data.user)),a(e)}).catch(t=>{r(t)})})},destroyToken(t){if(t.getters.isLogin)return new Promise((e,a)=>{l()({method:"POST",url:t.state.url+"logout"}).then(a=>{!0===a.data.res&&(localStorage.removeItem("token"),t.commit("setToken",null),t.commit("setUser",{})),e(a)}).catch(t=>{a(t)})})}},modules:{}}),m={name:"login",data:()=>({email:"",password:""}),methods:{salir(){this.$emit("salir")},login(){d.dispatch("getToken",{email:this.email,password:this.password}).then(t=>{!0===t.data.res?(this.$toastr.success(t.data.message),this.$emit("salir")):this.$toastr.error(t.data.message)})}}},p=m,h=a("2877"),g=a("6544"),v=a.n(g),f=a("8336"),b=a("b0af"),k=a("99d9"),_=a("ce7e"),x=a("4bd4"),y=a("2fa4"),V=a("8654"),w=Object(h["a"])(p,n,i,!1,null,"2e867bcc",null),C=w.exports;v()(w,{VBtn:f["a"],VCard:b["a"],VCardActions:k["a"],VCardText:k["b"],VCardTitle:k["c"],VDivider:_["a"],VForm:x["a"],VSpacer:y["a"],VTextField:V["a"]});var O={name:"App",components:{Login:C},data:()=>({dialog:!1}),computed:{...Object(c["b"])({isLogin:"isLogin",user:"getUser"})},methods:{salir(){this.dialog=!1},logout(){confirm("Seguro que quires salir? ")&&d.dispatch("destroyToken").then(t=>{!0===t.data.res?this.$toastr.success(t.data.message):this.$toastr.error(t.data.message)})}}},T=O,P=a("7496"),S=a("40dc"),j=a("8212"),L=a("a523"),$=a("169a"),A=a("f6c4"),B=Object(h["a"])(T,o,s,!1,null,null,null),E=B.exports;v()(B,{VApp:P["a"],VAppBar:S["a"],VAvatar:j["a"],VBtn:f["a"],VContainer:L["a"],VDialog:$["a"],VMain:A["a"],VSpacer:y["a"]});var I=a("8c4f"),D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{outlined:"",loading:t.loading}},[a("v-card-title",[t._v(" CATALOGO DE PRODUCTOS all "),a("v-spacer"),t.isLogin?a("v-btn",{attrs:{color:"green",text:"",outlined:""},on:{click:t.openForm}},[t._v(" Nuevo producto ")]):t._e()],1),a("v-divider"),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"10",md:"10",sm:"12"}},[a("v-text-field",{attrs:{label:"Buscar por nombre o descripcion",outlined:"",dense:""},model:{value:t.txtBuscar,callback:function(e){t.txtBuscar=e},expression:"txtBuscar"}})],1),a("v-col",{attrs:{cols:"2",md:"2",sm:"12"}},[a("v-btn",{attrs:{color:"primary"},on:{click:t.getProductos}},[t._v(" Buscar ")])],1)],1),a("v-row",{staticStyle:{"margin-top":"-50px"}},t._l(t.productos,(function(e,r){return a("v-col",{key:r,attrs:{cols:"12",md:"3",sm:"6"}},[a("Producto",{attrs:{producto:e},on:{listar:t.getProductos}})],1)})),1)],1)],1)},U=[],q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mx-auto my-12",attrs:{"max-width":"220","max-height":"640"}},[null!==t.producto.url_imagen&&t.producto.url_imagen.includes("http")?a("v-img",{attrs:{height:"150",src:t.producto.url_imagen},on:{click:function(e){t.dialogImagen=!0}}}):t._e(),null===t.producto.url_imagen||t.producto.url_imagen.includes("http")?t._e():a("v-img",{attrs:{height:"150",src:"http://127.0.0.1:8000/imagenes/"+t.producto.url_imagen},on:{click:function(e){t.dialogImagen=!0}}}),a("v-card-title",[t._v(t._s(t.producto.codigo)+" | "+t._s(t.producto.nombre))]),a("v-card-text",[a("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[a("v-rating",{attrs:{value:4.5,color:"amber",dense:"","half-increments":"",readonly:"",size:"14"}}),a("div",{staticClass:"grey--text ml-4"},[t._v(" 4.5 (413) ")])],1),a("div",{staticClass:"my-4 subtitle-1"},[t._v(" BOB: "+t._s(t.producto.precio)+" ")]),a("div",[t._v(" "+t._s(t.producto.descripcion)+" ")])],1),a("v-divider",{staticClass:"mx-4"}),a("v-card-text",[a("v-chip-group",{attrs:{"active-class":"deep-purple accent-4 white--text",column:""}},[a("v-chip",{on:{click:t.setLike}},[a("v-icon",[t._v("mdi-thumb-up")]),t._v(" ( "+t._s(t.producto.like)+" ) ")],1),a("v-chip",{on:{click:t.setDisLike}},[a("v-icon",[t._v("mdi-thumb-down")]),t._v(" ( "+t._s(t.producto.dislike)+" ) ")],1)],1)],1),a("v-card-actions",[t.isLogin?a("v-btn",{attrs:{color:"green",text:""},on:{click:t.openForm}},[t._v(" Editar ")]):t._e(),t.isLogin?a("v-btn",{attrs:{color:"red",text:""},on:{click:t.eliminar}},[t._v(" Eliminar ")]):t._e()],1),a("v-dialog",{attrs:{"max-width":"500px",persistent:""},model:{value:t.dialogImagen,callback:function(e){t.dialogImagen=e},expression:"dialogImagen"}},[a("subir-imagen",{attrs:{producto:t.producto},on:{salir:function(e){t.dialogImagen=!1},listar:function(e){return t.$emit("listar")}}})],1)],1)},F=[],H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{outlined:""}},[a("form",{attrs:{method:"post",id:"frmImagen",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[a("v-card-title",[a("h3",[t._v("Cargar imagen del producto: "+t._s(t.producto.codigo))]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$emit("salir")}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-divider"),a("v-card-text",[a("input",{ref:"url_imagen",attrs:{type:"file",id:"url_imagen",name:"url_imagen",accept:"image/gif, image/jpeg, image/png, image/jpg",required:""},on:{change:t.escogerArchivo}})]),a("v-card-actions",[a("v-btn",{attrs:{color:"green",block:"",dark:"",type:"submit",loading:t.loading}},[t._v(" Subir imagen ")])],1)],1)])},N=[],M={name:"subir-imagen",props:["producto"],data:()=>({loading:!1,file:null}),computed:{...Object(c["c"])(["url"])},methods:{escogerArchivo(t){this.file=t.target.files[0]},save(){const t=this.url+"set_imagen/"+this.producto.id;let e=new FormData;e.append("imagen",this.file),e.append("_method","PUT"),this.loading=!0,this.axios.post(t,e).then(t=>{!0===t.data.res?(this.$toastr.success(t.data.message),this.$emit("listar"),this.$emit("salir")):this.$toastr.error(t.data.message),this.loading=!1})}}},R=M,z=a("132d"),J=Object(h["a"])(R,H,N,!1,null,"7f1fda22",null),G=J.exports;v()(J,{VBtn:f["a"],VCard:b["a"],VCardActions:k["a"],VCardText:k["b"],VCardTitle:k["c"],VDivider:_["a"],VIcon:z["a"],VSpacer:y["a"]});var K={name:"producto",components:{SubirImagen:G},props:["producto"],data:()=>({dialogImagen:!1}),computed:{...Object(c["c"])(["url"]),...Object(c["b"])({isLogin:"isLogin",user:"getUser"})},methods:{openForm(){this.$router.push({name:"Producto.edit",params:{id:this.producto.id}})},setLike(){const t=this.url+"set_like/"+this.producto.id;this.axios.put(t).then(t=>{!0===t.data.res?(this.$toastr.success(t.data.message),this.producto.like=this.producto.like+1):this.$toastr.error(t.data.message)})},setDisLike(){const t=this.url+"set_dislike/"+this.producto.id;this.axios.put(t).then(t=>{!0===t.data.res?(this.$toastr.success(t.data.message),this.producto.dislike=this.producto.dislike+1):this.$toastr.error(t.data.message)})},eliminar(){if(confirm("Seguro que quiere eliminar el registro? ")){const t=this.url+"productos/"+this.producto.id;this.axios.delete(t).then(t=>{!0===t.data.res?(this.$toastr.success(t.data.message),this.$emit("listar")):this.$toastr.error(t.data.message)})}}}},Q=K,W=a("cc20"),X=a("ef9a"),Y=a("adda"),Z=a("1d4d"),tt=a("0fd9"),et=Object(h["a"])(Q,q,F,!1,null,"679be18a",null),at=et.exports;v()(et,{VBtn:f["a"],VCard:b["a"],VCardActions:k["a"],VCardText:k["b"],VCardTitle:k["c"],VChip:W["a"],VChipGroup:X["a"],VDialog:$["a"],VDivider:_["a"],VIcon:z["a"],VImg:Y["a"],VRating:Z["a"],VRow:tt["a"]});var rt={name:"Home",components:{Producto:at},data:()=>({productos:[],loading:!1,txtBuscar:""}),computed:{...Object(c["c"])(["url"]),...Object(c["b"])({isLogin:"isLogin",user:"getUser"})},mounted(){this.getProductos()},methods:{openForm(){this.$router.push({name:"Producto"})},getProductos(){this.loading=!0;const t=this.url+"productos?txtBuscar="+this.txtBuscar;this.axios.get(t).then(t=>{console.log(t.data),this.productos=t.data,this.loading=!1})}}},ot=rt,st=a("62ad"),nt=Object(h["a"])(ot,D,U,!1,null,null,null),it=nt.exports;v()(nt,{VBtn:f["a"],VCard:b["a"],VCardText:k["b"],VCardTitle:k["c"],VCol:st["a"],VDivider:_["a"],VRow:tt["a"],VSpacer:y["a"],VTextField:V["a"]}),r["a"].use(I["a"]);const ct=[{path:"/",name:"Home",component:it},{path:"/about",name:"About",component:function(){return a.e("about~6a3582c1").then(a.bind(null,"f820"))}},{path:"/producto",name:"Producto",component:function(){return a.e("chunk-3a2f3c0e").then(a.bind(null,"6604"))},meta:{requiresAuth:!0}},{path:"/producto/:id/edit",name:"Producto.edit",component:function(){return a.e("chunk-3a2f3c0e").then(a.bind(null,"6604"))},meta:{requiresAuth:!0}}],ut=new I["a"]({mode:"history",base:"/",routes:ct});var lt=ut,dt=a("f309");r["a"].use(dt["a"]);var mt=new dt["a"]({}),pt=a("2106"),ht=a.n(pt),gt=a("ddf5"),vt=a.n(gt);a("e1db");r["a"].use(ht.a,l.a),window.toastr=a("854a"),r["a"].use(vt.a),r["a"].config.productionTip=!1,d.getters.isLogin&&(l.a.defaults.headers.common.Authorization="Bearer "+d.state.token,d.dispatch("getUser")),l.a.interceptors.response.use((function(t){return t}),(function(t){return 403!==t.response.status&&404!==t.response.status||console.log("error 403, 404"),401===t.response.status&&(this.toastr.error("Usuario invitado"),d.dispatch("destroyToken").then(t=>{this.toastr.succes(t.data.message),lt.push({name:"Home"})})),Promise.reject(t)})),lt.beforeEach((t,e,a)=>{t.matched.some(t=>t.meta.requiresAuth)?d.getters.isLogin?a():a({name:"Home"}):a()}),new r["a"]({router:lt,store:d,vuetify:mt,render:function(t){return t(E)}}).$mount("#app")}});
//# sourceMappingURL=app~d0ae3f07.c0f911f6.js.map